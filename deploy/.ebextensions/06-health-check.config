###################################################################################################
# 06-health-check.config
# Configura health checks avançados e página de status customizada
###################################################################################################

option_settings:
  # Health check do Elastic Beanstalk
  aws:elasticbeanstalk:healthreporting:system:
    SystemType: enhanced
    
  aws:elasticbeanstalk:environment:
    ServiceRole: aws-elasticbeanstalk-service-role
    
  # Application health check URL
  aws:elasticbeanstalk:application:
    Application Healthcheck URL: /actuator/health
    
  # Configurações de processo
  aws:elasticbeanstalk:environment:process:default:
    HealthCheckPath: /actuator/health
    HealthCheckInterval: 30
    HealthCheckTimeout: 5
    HealthyThresholdCount: '2'
    UnhealthyThresholdCount: '3'
    Port: '5000'
    Protocol: HTTP
    
files:
  "/opt/elasticbeanstalk/tasks/bundlelogs.d/applogs.conf":
    mode: "000644"
    owner: root
    group: root
    content: |
      /var/app/current/logs/*.log